\newpage\cleardoublepage\phantomsection
\section{Code generation}
 
For each LLVM IR operation we built a small code generating object. Once this object is created it (in most cases) imidiatly generates the code he is supposed to.
Code is generated from the leaves of the Abstract Ayntactical Tree (AST) to the root.\\ LLVM IR uses a lot of temporary variables, a VariableAllocator object is used to create new variables name dynamically.
It's a very simple Variable object (containing a name and a type) that is passed from a lower to a higher level in the AST.
This way a recursive expression will see its most inner part resolved and replaced by a new temporary variable. Each expression finally resolve to a single variable as its code gets generated by the simple arithmetic code generation objects mentionned higher.



\section{casting temporary variables}

In LLVM, arithmetic operations cannot operate on variables of different size. At each new variable created or computaion a cast is necessary to make sure both operand of the expression have the same size. This is done using 
$$this.ensureDest(var_1, var_2 );$$

\subsection{Example}
See the code generating an LLVM IR assignation from the $ADD$ SCOBOL keyword \ref{add}, and the assignation class \ref{assign}.



\myinputminted[firstline=3, lastline=28, linenos=false]{java}{code/code_gen.java}{Code generation for the $ADD$ SCOBOL keyword}{add}{2}
\myinputminted[firstline=1, lastline=15, linenos=false]{java}{code/assign.java}{Assign}{assign}{0}
